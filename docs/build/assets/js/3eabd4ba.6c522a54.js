"use strict";(self.webpackChunkbabylon_mmd_docs=self.webpackChunkbabylon_mmd_docs||[]).push([[713],{7684:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>A,contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>d,toc:()=>p});var o=a(7462),r=(a(7294),a(3905)),n=a(2004);const l=a.p+"assets/medias/2023-07-29 19-23-19-b8a395f94207539a4965fe9d008214c6.mp4",i={},s="Audio And Player Controls",d={unversionedId:"deep-usage/audio-and-player/index",id:"deep-usage/audio-and-player/index",title:"Audio And Player Controls",description:"Add synchronized audio and use simple player controls.",source:"@site/docs/1-deep-usage/6-audio-and-player/index.mdx",sourceDirName:"1-deep-usage/6-audio-and-player",slug:"/deep-usage/audio-and-player/",permalink:"/babylon-mmd/docs/deep-usage/audio-and-player/",draft:!1,editUrl:"https://github.com/noname0310/babylon-mmd/tree/main/docs/babylon-mmd-docs/docs/1-deep-usage/6-audio-and-player/index.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Load BVMD Animation",permalink:"/babylon-mmd/docs/deep-usage/load-bvmd-animation/"},next:{title:"Troubleshooting Shading Artifacts",permalink:"/babylon-mmd/docs/deep-usage/troubleshooting-shading-artifacts/"}},A={},p=[{value:"Download Music: &quot;\u30d2\u309a\u30c1\u30ab\u30fc\u30c8\u30c8\u3099\u30ed\u30c3\u30d5\u309a\u30b9&quot;",id:"download-music-\u30d2\u309a\u30c1\u30ab\u30fc\u30c8\u30c8\u3099\u30ed\u30c3\u30d5\u309a\u30b9",level:2},{value:"Create Stream Audio Player",id:"create-stream-audio-player",level:2},{value:"Create Player Controls",id:"create-player-controls",level:2}],u={toc:p},m="wrapper";function c(e){let{components:t,...i}=e;return(0,r.kt)(m,(0,o.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"audio-and-player-controls"},"Audio And Player Controls"),(0,r.kt)("p",null,"Add synchronized audio and use simple player controls."),(0,r.kt)("h2",{id:"download-music-\u30d2\u309a\u30c1\u30ab\u30fc\u30c8\u30c8\u3099\u30ed\u30c3\u30d5\u309a\u30b9"},'Download Music: "\u30d2\u309a\u30c1\u30ab\u30fc\u30c8\u30c8\u3099\u30ed\u30c3\u30d5\u309a\u30b9"'),(0,r.kt)("p",null,"Download the sample music for the tutorial."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=eYKAwm-sZ-o"},"\u3068\u3042 - \u30d2\u309a\u30c1\u30ab\u30fc\u30c8\u30c8\u3099\u30ed\u30c3\u30d5\u309a\u30b9 - ft.\u521d\u97f3\u30df\u30af ( Toa - Pizzicato Drops - ft.Hatsune Miku )")," - YouTube"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://ytmp3.nu/9a9B37/"},"YouTube to Mp3 Converter")," - YtMp3"),(0,r.kt)("p",null,"Motion and music start times won't match. So we need to adjust the start time of the music."),(0,r.kt)("p",null,"For this, we use ",(0,r.kt)("a",{parentName:"p",href:"https://mp3cut.net/"},"Online MP3 Cutter - Cut Songs, Make Ringtones"),"."),(0,r.kt)("p",null,"Set the start time to 00:01.6."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"cutting",src:a(3565).Z,width:"2099",height:"762"})),(0,r.kt)("p",null,'Put the downloaded mp3 file in the "res" folder as "pizzicato_drops.mp3".'),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"vscode files",src:a(5459).Z,width:"269",height:"224"})),(0,r.kt)("h2",{id:"create-stream-audio-player"},"Create Stream Audio Player"),(0,r.kt)("p",null,"Stream Audio Player is our built-in player, is a fast-load player thanks to streaming audio processing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/sceneBuilder.ts"',title:'"src/sceneBuilder.ts"'},'const audioPlayer = new StreamAudioPlayer(scene);\naudioPlayer.preservesPitch = false;\naudioPlayer.source = "res/pizzicato_drops.mp3";\nmmdRuntime.setAudioPlayer(audioPlayer);\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"new StreamAudioPlayer(disposeObservable)")," Create a new Stream Audio Player.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The audio player must be disposed when no longer needed. and if you want to dispose of the audio player when the scene is disposed, pass the scene. You can also put objects other than the scene."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"audioPlayer.preservesPitch = false;")," If you want to play the audio at the original pitch when the animation is played at a different speed, set it to ",(0,r.kt)("inlineCode",{parentName:"li"},"true"),".")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"By default, the browser does not have permission to play audio until the user interaction."),(0,r.kt)("p",{parentName:"admonition"},"If ",(0,r.kt)("inlineCode",{parentName:"p"},"audioPlayer.unmute()")," is invoked by user interaction, it is resolved and is also provided in the player control introduced below.")),(0,r.kt)("h2",{id:"create-player-controls"},"Create Player Controls"),(0,r.kt)("p",null,"Create a simple player control."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/sceneBuilder.ts"',title:'"src/sceneBuilder.ts"'},"new MmdPlayerControl(scene, mmdRuntime, audioPlayer);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"audioPlayer")," parameter is optional. If you don't use audio, you can omit it.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"There are not many customization available for player controls. This feature is for testing purposes only, and if you want more, you need to implement it yourself."))),(0,r.kt)(n.Z,{url:l,controls:!0,width:"100%",height:"100%",mdxType:"ReactPlayer"}))}c.isMDXComponent=!0},5459:(e,t,a)=>{a.d(t,{Z:()=>o});const o="data:image/png;base64,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"},3565:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/image-56260c2e18771cff227e6a5e0b43a837.png"}}]);